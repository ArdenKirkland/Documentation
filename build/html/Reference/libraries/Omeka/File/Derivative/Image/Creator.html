

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Omeka_File_Derivative_Image_Creator &mdash; Omeka Documentation v2.0 documentation</title>
    <link rel="stylesheet" href="../../../../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../../_static/doctools.js"></script>
    
    <link rel="top" title="Omeka Documentation v2.0 documentation" href="../../../../../../index.html" />
    <link rel="up" title="Libraries/Omeka/File/Derivative/Image" href="index.html" />
    <link rel="next" title="Libraries/Omeka/File/Ingest" href="../../Ingest/index.html" />
    <link rel="prev" title="Libraries/Omeka/File/Derivative/Image" href="index.html" />
    <link rel="stylesheet" href="../../../../../../_static/overrides.css" type="text/css" />
 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../Ingest/index.html" title="Libraries/Omeka/File/Ingest"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Libraries/Omeka/File/Derivative/Image"
             accesskey="P">previous</a> |</li>
    
        <li><a href="../../../../../../index.html">Omeka Documentation v2.0 documentation</a> &raquo;</li>
    <p style="background-color: white; color:red;">
    This documentation is currently unstable as changes continue to be made to Omeka 2.0.    
     The final release of Omeka 2.0 may have changes.</p>    

          <li><a href="../../../../../index.html" >Reference Documentation for Omeka</a> &raquo;</li>
          <li><a href="../../../index.html" >Libraries/Omeka</a> &raquo;</li>
          <li><a href="../../index.html" >Libraries/Omeka/File</a> &raquo;</li>
          <li><a href="../index.html" >Libraries/Omeka/File/Derivative</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Libraries/Omeka/File/Derivative/Image</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="omeka-file-derivative-image-creator">
<h1>Omeka_File_Derivative_Image_Creator<a class="headerlink" href="#omeka-file-derivative-image-creator" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Omeka_File_Derivative_Image_Creator">
<em class="property">class </em><tt class="descname">Omeka_File_Derivative_Image_Creator</tt><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator" title="Permalink to this definition">¶</a></dt>
<dd><p>Create derivative images for a file in Omeka.</p>
<dl class="attr">
<dt id="Omeka_File_Derivative_Image_Creator::$_convertPath">
<em class="property">property </em><tt class="descname">_convertPath</tt><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::$_convertPath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attr">
<dt id="Omeka_File_Derivative_Image_Creator::$_identifyPath">
<em class="property">property </em><tt class="descname">_identifyPath</tt><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::$_identifyPath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attr">
<dt id="Omeka_File_Derivative_Image_Creator::$_derivatives">
<em class="property">property </em><tt class="descname">_derivatives</tt><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::$_derivatives" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::__construct">
<tt class="descname">__construct</tt><big>(</big><em>$imDirPath</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::__construct" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$imDirPath</strong> (<em>unknown</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::setImageMagickDirPath">
<tt class="descname">setImageMagickDirPath</tt><big>(</big><em>string $imDirPath</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::setImageMagickDirPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the path to the ImageMagick executable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$imDirPath</strong> (<em>string</em>) &#8211; Path to the directory containing the ImageMagick binaries.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::getConvertPath">
<tt class="descname">getConvertPath</tt><big>(</big><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::getConvertPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full path to the ImageMagick &#8216;convert&#8217; command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::getIdentifyPath">
<tt class="descname">getIdentifyPath</tt><big>(</big><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::getIdentifyPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the full path to the ImageMagick &#8216;identify&#8217; command.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">string</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::create">
<tt class="descname">create</tt><big>(</big><em>string $fromFilePath</em>, <em>string $derivFilename</em>, <em>string $mimeType</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create all the derivatives requested with addDerivative().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$fromFilePath</strong> (<em>string</em>) &#8211; </li>
<li><strong>$derivFilename</strong> (<em>string</em>) &#8211; </li>
<li><strong>$mimeType</strong> (<em>string</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::addDerivative">
<tt class="descname">addDerivative</tt><big>(</big><em>string $storageType</em>, <em>integer|string $size</em>, <em>boolean $square =</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::addDerivative" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a derivative image to be created.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$storageType</strong> (<em>string</em>) &#8211; </li>
<li><strong>$size</strong> (<em>integer|string</em>) &#8211; If an integer, it is the size constraint for the image, meaning it will have that maximum width or height, depending on whether the image is landscape or portrait.  Otherwise, it is a string of arguments to be passed to the ImageMagick convert utility.  MUST BE PROPERLY ESCAPED AS SHELL ARGUMENTS.</li>
<li><strong>$square</strong> (<em>boolean</em>) &#8211; Whether the derivative to add should be made square.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::_createImage">
<tt class="descname">_createImage</tt><big>(</big><em>$origPath</em>, <em>$newPath</em>, <em>$convertArgs</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::_createImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a derivative image from an existing file stored in Omeka.</p>
<p>This image will be generated based on a constraint given in pixels.  For example, if the constraint is 500, the
resulting image file will be scaled so that the largest side is 500px. If the image is less than 500px on both
sides, the image will not be resized.</p>
<p>Derivative images will only be generated for files with mime types that can be identified with ImageMagick&#8217;s
&#8216;identify&#8217; command</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$origPath</strong> (<em>unknown</em>) &#8211; </li>
<li><strong>$newPath</strong> (<em>unknown</em>) &#8211; </li>
<li><strong>$convertArgs</strong> (<em>unknown</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::_getResizeCmdArgs">
<tt class="descname">_getResizeCmdArgs</tt><big>(</big><em>integer $constraint</em>, <em>boolean $square</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::_getResizeCmdArgs" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the ImageMagick command line for resizing to the given constraints.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$constraint</strong> (<em>integer</em>) &#8211; Maximum side length in pixels.</li>
<li><strong>$square</strong> (<em>boolean</em>) &#8211; Whether the derivative should be squared off.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::_isDerivable">
<tt class="descname">_isDerivable</tt><big>(</big><em>string $filePath</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::_isDerivable" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true only if ImageMagick is able to make derivative images of that file based
upon whether or not it can be identified by ImageMagick&#8217;s &#8216;identify&#8217; binary. Otherwise returns false.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$filePath</strong> (<em>string</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::_isIdentifiable">
<tt class="descname">_isIdentifiable</tt><big>(</big><em>string $filePath</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::_isIdentifiable" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true only if the file can be identified by ImageMagick&#8217;s &#8216;identify&#8217; binary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$filePath</strong> (<em>string</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::isValidImageMagickPath">
<tt class="descname">isValidImageMagickPath</tt><big>(</big><em>$dirToIm</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::isValidImageMagickPath" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine whether or not the path given to ImageMagick is valid.
Both the convert and identify binaries must be within the directory and executable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>$dirToIm</strong> (<em>unknown</em>) &#8211; </li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">boolean</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::getDefaultImageMagickDir">
<tt class="descname">getDefaultImageMagickDir</tt><big>(</big><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::getDefaultImageMagickDir" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the path to the directory containing ImageMagick&#8217;s convert utility.
Th</p>
<p>Uses the &#8216;which&#8217; command-line utility to detect the path to &#8216;convert&#8217;.
Note that this will only work if the convert utility is in PHP&#8217;s PATH and thus can be located by &#8216;which&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">string The path to the directory if it can be found.  Otherwise returns an empty string.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Omeka_File_Derivative_Image_Creator::executeCommand">
<tt class="descname">executeCommand</tt><big>(</big><em>$cmd</em>, <em>$status</em>, <em>$output</em>, <em>$errors</em><big>)</big><a class="headerlink" href="#Omeka_File_Derivative_Image_Creator::executeCommand" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>$cmd</strong> (<em>unknown</em>) &#8211; </li>
<li><strong>$status</strong> (<em>unknown</em>) &#8211; </li>
<li><strong>$output</strong> (<em>unknown</em>) &#8211; </li>
<li><strong>$errors</strong> (<em>unknown</em>) &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../../../index.html">
              <img class="logo" src="../../../../../../_static/logo-horizontal-200px.gif" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Libraries/Omeka/File/Derivative/Image</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../../Ingest/index.html"
                        title="next chapter">Libraries/Omeka/File/Ingest</a></p>
  <h3>This Page</h3>
  <p>See something wrong or confusing on this page?
    Please open an issue on <a href="https://github.com/omeka/OmekaDoc/issues.rst" rel="nofollow">Github</a>
    </p>
  <ul class="this-page-menu">
    
    <li><a href="https://github.com/omeka/OmekaDoc/master/sourceReference/libraries/Omeka/File/Derivative/Image/Creator.rst"
           rel="nofollow">View Source</a>
    </li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../Ingest/index.html" title="Libraries/Omeka/File/Ingest"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Libraries/Omeka/File/Derivative/Image"
             >previous</a> |</li>
    
        <li><a href="../../../../../../index.html">Omeka Documentation v2.0 documentation</a> &raquo;</li>
    <p style="background-color: white; color:red;">
    This documentation is currently unstable as changes continue to be made to Omeka 2.0.    
     The final release of Omeka 2.0 may have changes.</p>    

          <li><a href="../../../../../index.html" >Reference Documentation for Omeka</a> &raquo;</li>
          <li><a href="../../../index.html" >Libraries/Omeka</a> &raquo;</li>
          <li><a href="../../index.html" >Libraries/Omeka/File</a> &raquo;</li>
          <li><a href="../index.html" >Libraries/Omeka/File/Derivative</a> &raquo;</li>
          <li><a href="index.html" >Libraries/Omeka/File/Derivative/Image</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Roy Rosenzweig Center for History and New Media.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>