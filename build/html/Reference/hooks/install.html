

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>install &mdash; Omeka Documentation v2.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <link rel="top" title="Omeka Documentation v2.0 documentation" href="../../index.html" />
    <link rel="up" title="Hooks" href="index.html" />
    <link rel="next" title="initialize" href="initialize.html" />
    <link rel="prev" title="config_form" href="config_form.html" />
    <link rel="stylesheet" href="../../_static/overrides.css" type="text/css" />
 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="initialize.html" title="initialize"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="config_form.html" title="config_form"
             accesskey="P">previous</a> |</li>
    
        <li><a href="../../index.html">Omeka Documentation v2.0 documentation</a> &raquo;</li>
    <p style="background-color: white; color:red;">
    This documentation is currently unstable as changes continue to be made to Omeka 2.0.    
     The final release of Omeka 2.0 may have changes.</p>    

          <li><a href="../index.html" >Reference Documentation for Omeka</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Hooks</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="install">
<h1>install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h1>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>This hook is primarily used to set options to the database and create tables, and any other initial actions required for your plugin to function, such as initial records or setting options.</p>
</div>
<div class="section" id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">integer</span></tt> plugin_id</dt>
<dd>The id of the plugin</dd>
</dl>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-php"><div class="highlight"><pre><span class="k">class</span> <span class="nc">SimplePagesPlugin</span> <span class="k">extends</span> <span class="nx">Omeka_Plugin_AbstractPlugin</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$_hooks</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;install&#39;</span><span class="p">);</span>

    <span class="k">protected</span> <span class="nv">$_options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;simple_pages_filter_page&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;0&#39;</span><span class="p">);</span>

    <span class="k">function</span> <span class="nf">hookInstall</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">// Create the table.</span>
        <span class="nv">$db</span> <span class="o">=</span> <span class="nx">get_db</span><span class="p">();</span>
        <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;</span>
<span class="s2">        CREATE TABLE IF NOT EXISTS `</span><span class="si">$db-&gt;SimplePagesPage</span><span class="s2">` (</span>
<span class="s2">          `id` int(10) unsigned NOT NULL AUTO_INCREMENT,</span>
<span class="s2">          `modified_by_user_id` int(10) unsigned NOT NULL,</span>
<span class="s2">          `created_by_user_id` int(10) unsigned NOT NULL,</span>
<span class="s2">          `is_published` tinyint(1) NOT NULL,</span>
<span class="s2">          `title` tinytext COLLATE utf8_unicode_ci NOT NULL,</span>
<span class="s2">          `slug` tinytext COLLATE utf8_unicode_ci NOT NULL,</span>
<span class="s2">          `text` text COLLATE utf8_unicode_ci,</span>
<span class="s2">          `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span>
<span class="s2">          `inserted` timestamp NOT NULL DEFAULT &#39;0000-00-00 00:00:00&#39;,</span>
<span class="s2">          `order` int(10) unsigned NOT NULL,</span>
<span class="s2">          `parent_id` int(10) unsigned NOT NULL,</span>
<span class="s2">          `template` tinytext COLLATE utf8_unicode_ci NOT NULL,</span>
<span class="s2">          `use_tiny_mce` tinyint(1) NOT NULL,</span>
<span class="s2">          PRIMARY KEY (`id`),</span>
<span class="s2">          KEY `is_published` (`is_published`),</span>
<span class="s2">          KEY `inserted` (`inserted`),</span>
<span class="s2">          KEY `updated` (`updated`),</span>
<span class="s2">          KEY `created_by_user_id` (`created_by_user_id`),</span>
<span class="s2">          KEY `modified_by_user_id` (`modified_by_user_id`),</span>
<span class="s2">          KEY `order` (`order`),</span>
<span class="s2">          KEY `parent_id` (`parent_id`)</span>
<span class="s2">        ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci&quot;</span><span class="p">;</span>
        <span class="nv">$db</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>

        <span class="c1">// Save an example page.</span>
        <span class="nv">$page</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SimplePagesPage</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">modified_by_user_id</span> <span class="o">=</span> <span class="nx">current_user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">created_by_user_id</span> <span class="o">=</span> <span class="nx">current_user</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">id</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">is_published</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">parent_id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">title</span> <span class="o">=</span> <span class="s1">&#39;About&#39;</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">slug</span> <span class="o">=</span> <span class="s1">&#39;about&#39;</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">text</span> <span class="o">=</span> <span class="s1">&#39;&lt;p&gt;This is an example page. Feel free to replace this content, or delete the page and start from scratch.&lt;/p&gt;&#39;</span><span class="p">;</span>
        <span class="nv">$page</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">_installOptions</span><span class="p">();</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-horizontal-200px.gif" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">install</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#arguments">Arguments</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="config_form.html"
                        title="previous chapter">config_form</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="initialize.html"
                        title="next chapter">initialize</a></p>
  <h3>This Page</h3>
  <p>See something wrong or confusing on this page?
    Please open an issue on <a href="https://github.com/omeka/Documentation/issues" rel="nofollow">Github</a>
    </p>
  <ul class="this-page-menu">
    
    <li><a href="https://github.com/omeka/Documentation/master/sourceReference/hooks/install.rst"
           rel="nofollow">View Source</a>
    </li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="initialize.html" title="initialize"
             >next</a> |</li>
        <li class="right" >
          <a href="config_form.html" title="config_form"
             >previous</a> |</li>
    
        <li><a href="../../index.html">Omeka Documentation v2.0 documentation</a> &raquo;</li>
    <p style="background-color: white; color:red;">
    This documentation is currently unstable as changes continue to be made to Omeka 2.0.    
     The final release of Omeka 2.0 may have changes.</p>    

          <li><a href="../index.html" >Reference Documentation for Omeka</a> &raquo;</li>
          <li><a href="index.html" >Hooks</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Roy Rosenzweig Center for History and New Media.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>